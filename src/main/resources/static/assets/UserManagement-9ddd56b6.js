import{i as m}from"./requests-6ec0e6c6.js";import{d as f,r as g,k as h,o as b,c as v,l,u as V,E as C,y as o,a as p,t as x,e as y,F as k}from"./index-b004050c.js";const U={style:{display:"flex","align-items":"center"}},z=f({__name:"UserManagement",setup(D){const t=g([]);m.get("/api/user").then(n=>{t.value=n});const c=(n,u)=>{confirm("确认删除?")&&m.delete("/api/user/"+u.id).then(r=>{r==!0?t.value.splice(n,1):alert("删除失败")})},i=n=>{m.post("/api/user",n).then(u=>{u==!1&&alert("修改失败")})},_=()=>{m.post("/register",{id:t.value.length==0?1:t.value[t.value.length-1].id+1,password:"123456"}).then(n=>{if(n==null){alert("新增失败");return}}),t.value.push({id:t.value.length==0?1:t.value[t.value.length-1].id+1,nickName:"新手工作人员",bid:"",qid:"",level:0})};return(n,u)=>{const r=h("el-button"),d=h("el-table-column"),s=h("el-input"),w=h("el-table");return b(),v(k,null,[l(r,{type:"primary",icon:V(C),onClick:_,circle:""},null,8,["icon"]),l(w,{data:t.value,style:{width:"100%"}},{default:o(()=>[l(d,{label:"ID",width:"50"},{default:o(e=>[p("div",U,[p("span",null,x(e.row.id),1)])]),_:1}),l(d,{label:"昵称",width:"200"},{default:o(e=>[l(s,{modelValue:e.row.nickName,"onUpdate:modelValue":a=>e.row.nickName=a,maxlength:"10",size:"small",placeholder:"Please input","show-word-limit":"",clearable:"true",type:"text",onChange:a=>i(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(d,{label:"BID",width:"200"},{default:o(e=>[l(s,{modelValue:e.row.bid,"onUpdate:modelValue":a=>e.row.bid=a,maxlength:"10",size:"small",placeholder:"Please input","show-word-limit":"",clearable:"true",type:"text",onChange:a=>i(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(d,{label:"QID",width:"200"},{default:o(e=>[l(s,{modelValue:e.row.qid,"onUpdate:modelValue":a=>e.row.qid=a,maxlength:"10",size:"small",placeholder:"Please input","show-word-limit":"",clearable:"true",type:"text",onChange:a=>i(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(d,{label:"等级",width:"70"},{default:o(e=>[l(s,{modelValue:e.row.level,"onUpdate:modelValue":a=>e.row.level=a,onChange:a=>i(e.row),size:"small",type:"number"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(d,{label:"操作",width:"150"},{default:o(e=>[l(r,{size:"small",type:"danger",onClick:a=>c(e.$index,e.row)},{default:o(()=>[y("Delete")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],64)}}});export{z as default};
