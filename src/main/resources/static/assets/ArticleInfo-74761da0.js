import{i as u}from"./requests-6ec0e6c6.js";import{d as v,r as D,k as c,o as V,c as C,l,u as k,E as x,y as o,a as m,t as _,e as g,F as U,f as $}from"./index-b004050c.js";const z={style:{display:"flex","align-items":"center"}},E={style:{display:"flex","align-items":"center"}},B=v({__name:"ArticleInfo",setup(M){const d=D([]);u.get("/api/blog/article/info").then(t=>{d.value=t});const p=t=>{u.post("/api/blog/article",t).then(n=>{n==!0&&alert("修改成功")})},f=(t,n)=>{confirm("确认删除?")&&(u.delete("/api/blog/article/"+n.id).then(r=>{r==!0?d.value.splice(t,1):alert("删除失败")}),u.get("/api/blog/reduce_article_count"))},b=()=>{let t=new Date,n=t.getMonth()+1<10?"0"+(t.getMonth()+1):(t.getMonth()+1).toString(),r=t.getDate()<10?"0"+t.getDate():t.getDate().toString(),i=new Date().getFullYear()+"-"+n+"-"+r,s={id:d.value.length==0?1:d.value[d.value.length-1].id+1,title:"",tabloid:"",publishDate:i,readingQuantity:0};u.post("/api/blog/article",s).then(h=>{h==!1&&d.value.push(s)}),u.get("/api/blog/add_article_count")},w=t=>{for(let n in t)if(t[n]==null&&t[n]!=0){alert("所有属性不能为空");return}$.push({name:"editarticle",query:{id:t.id}})};return(t,n)=>{const r=c("el-button"),i=c("el-table-column"),s=c("el-input"),h=c("el-date-picker"),y=c("el-table");return V(),C(U,null,[l(r,{type:"primary",icon:k(x),onClick:b,circle:""},null,8,["icon"]),l(y,{data:d.value,style:{width:"100%"}},{default:o(()=>[l(i,{label:"ID",width:"50"},{default:o(e=>[m("div",z,[m("span",null,_(e.row.id),1)])]),_:1}),l(i,{label:"文章标题",width:"300"},{default:o(e=>[l(s,{modelValue:e.row.title,"onUpdate:modelValue":a=>e.row.title=a,maxlength:"50",size:"small",placeholder:"Please input","show-word-limit":"",clearable:"true",type:"text",onChange:a=>p(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(i,{label:"文章简介",width:"450"},{default:o(e=>[l(s,{modelValue:e.row.tabloid,"onUpdate:modelValue":a=>e.row.tabloid=a,maxlength:"200",size:"small",placeholder:"Please input","show-word-limit":"",type:"text",onChange:a=>p(e.row),clearable:"true"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(i,{label:"发布日期",width:"150"},{default:o(e=>[l(h,{modelValue:e.row.publishDate,"onUpdate:modelValue":a=>e.row.publishDate=a,type:"date",placeholder:"Pick a day",size:"small","value-format":"YYYY-MM-DD",onChange:a=>p(e.row),style:{width:"auto"}},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(i,{label:"阅读量",width:"150"},{default:o(e=>[m("div",E,[m("span",null,_(e.row.readingQuantity),1)])]),_:1}),l(i,{label:"操作",width:"150"},{default:o(e=>[l(r,{size:"small",onClick:a=>w(e.row)},{default:o(()=>[g("Edit")]),_:2},1032,["onClick"]),l(r,{size:"small",type:"danger",onClick:a=>f(e.$index,e.row)},{default:o(()=>[g("Delete")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],64)}}});export{B as default};
